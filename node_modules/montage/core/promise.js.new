exports.Promise = Promise;
exports.Promise.is = function (promise) {
	return promise &&  promise.then;
}

exports.Promise.prototype['finally'] = function finallyPolyfill(callback) {
	var constructor = this.constructor;

	return this.then(function(value) {
			return constructor.resolve(callback()).then(function() {
				return value;
			});
		}, function(reason) {
			return constructor.resolve(callback()).then(function() {
				throw reason;
			});
		});
};

exports.Promise.is = function (promise) {
	return promise && typeof promise.then === 'function';
}